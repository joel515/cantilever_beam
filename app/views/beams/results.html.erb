<% provide(:title, "Results") %>
<h1><%= @beam.name %> Results</h1>
<div class="row">
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        <strong>Input Dimensions, Loads, and Parameters</strong>
      </div>
      <table class="table">
        <tbody>
          <tr>
            <td>Length</td>
            <td><%= number_with_units(@beam,
                                      :length) %></td>
          </tr>
          <tr>
            <td>Width</td>
            <td><%= number_with_units(@beam,
                                      :width) %></td>
          </tr>
          <tr>
            <td>Height</td>
            <td><%= number_with_units(@beam,
                                      :height) %></td>
          </tr>
          <tr>
            <td>Material</td>
            <td><%= @beam.material %></td>
          </tr>
          <tr>
            <td>&nbsp;&nbsp;&bull; Modulus of Elasticity</td>
            <td><%= number_with_units(@beam,
                                      :modulus) %></td>
          </tr>
          <tr>
            <td>&nbsp;&nbsp;&bull; Poisson's Ratio</td>
            <td><%= @beam.poisson %></td>
          </tr>
          <tr>
            <td>&nbsp;&nbsp;&bull; Density</td>
            <td><%= number_with_units(@beam,
                                      :density) %></td>
          </tr>
          <tr>
            <td>End Load</td>
            <td><%= number_with_units(@beam,
                                      :load) %></td>
          </tr>
          <tr>
            <td>Hexogonal Mesh Size</td>
            <td><%= number_with_units(@beam,
                                      :meshsize) %></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">
        <strong>Calculated Results from Timoshenko Beam Theory</strong>
      </div>
      <table class="table">
        <tbody>
          <tr>
            <td>Bending Moment of Inertia</td>
            <td><%= number_with_units(@beam,
                                      :inertia,
                                      is_result: true) %></td>
          </tr>
          <tr>
            <td>Mass</td>
            <td><%= number_with_units(@beam,
                                      :mass,
                                      is_result: true) %></td>
          </tr>
          <tr>
            <td>Reactive Force</td>
            <td><%= number_with_units(@beam,
                                      :force_reaction,
                                      is_result: true) %></td>
          </tr>
          <tr>
            <td>Reactive Moment</td>
            <td><%= number_with_units(@beam,
                                      :moment_reaction,
                                      is_result: true) %></td>
          </tr>
          <tr>
            <td>Maximum Angle</td>
            <td><%= number_with_precision(@beam.theta,
                                          precision: 3,
                                          significant: true) %>&#176;</tr>
          <tr>
            <td>Maximum Displacement</td>
            <td><%= number_with_units(@beam,
                                      :displacement,
                                      is_result: true) %></td>
          </tr>
          <tr>
            <td>Maximum Principal Stress</td>
            <td><%= number_with_units(@beam,
                                      :stress,
                                      is_result: true) %></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        <strong>Finite Element Analysis Summary</strong>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>Analytical Result</th>
            <th>Timoshenko Theory</th>
            <th>Error</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>&delta;<sub>y</sub></td>
            <%= result_table(@beam, :displacement) %>
          </tr>
          <tr>
            <td>&sigma;<sub>33</sub></td>
            <%= result_table(@beam, :stress) %>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item"
        src=<%= "embed?result=#{@result}" %>>
      </iframe>
      <div class="btn-group-vertical btn-group-results">
        <%= link_to "<strong>&sigma;<sub>zz</sub></strong>".html_safe,
          results_beam_path(@beam, result: "stress"),
          class: "btn btn-transparent",
          data: { toggle: 'tooltip', placement: 'top' },
          title: 'View stress' %>
        <%= link_to "<strong>&delta;<sub>y</sub></strong>".html_safe,
          results_beam_path(@beam, result: "displ"),
          class: "btn btn-transparent",
          data: { toggle: 'tooltip', placement: 'top' },
          title: 'View displacement' %>
        <%= link_to "<span class='glyphicon glyphicon-fullscreen'>" \
          "</span>".html_safe,
          embed_beam_path(@beam, result: params[:result]),
          class: "btn btn-transparent",
          data: { toggle: 'tooltip', placement: 'top' },
          title: 'Open in new tab',
          target: "_blank" %>
      </div>
    </div>
  </div>
</div>
<%= button_group(@beam, text: true, size: 'btn-md') %>
